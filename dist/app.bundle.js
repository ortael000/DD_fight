(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var n=e((function t(e,n,a,o,r,i,c,p,d,s,l,h,u,m,_,f,g,k,v,b){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.HP=n,this.CA=a,this.Init=o,this.attack1=r,this.attack1_touch=i,this.attack1_min=c,this.attack1_max=p,this.attack1_proba=d,this.attack2=s,this.attack2_touch=l,this.attack2_min=h,this.attack2_max=u,this.attack2_proba=m,this.drop_xp=_,this.drop_coin=f,this.drop_object1=g,this.proba1=k,this.drop_object2=v,this.proba2=b})),a=[new n("gothir_soldier",16,12,2,"sword blow",3,3,9,.7,"furious charge",0,5,12,.3,320,40,"epee courte en fer",.5,"tresor gothir 1",.1),new n("gothir_archer",14,2,5,"arrow",3,2,7,1,0,0,0,0,0,340,45,"5 x fleche en fer",.5,"tresor gothir 1",.1),new n("gothir_sergeant",20,14,3,"masse blow",5,5,10,.7,"Break the knees and inflict - 3 CA for the rest of the fight",3,5,10,.3,550,60,"tresor gothir 1",.3,"Iron mace",.7),new n("gothir_knight",26,17,5,"sword blow",7,5,12,.6,"defensive blow (+4 CA until next turn)",4,4,10,.4,900,120,"tresor gothir 1",.6,"Gothir tresor 2",.2),new n("gothir_royal_guard",32,19,7,"sword blow",9,8,15,.6,"defensive blow (+4 CA until next turn)",7,7,13,.4,1500,200,"tresor gothir 1",.8,"Gothir tresor 2",.4)],o=a.length,r=document.getElementById("add_opponent"),i=document.getElementById("opponent_input"),c=document.getElementById("opponents_display"),p=document.getElementById("opponent_number"),d=document.getElementById("add_character"),s=document.getElementById("character_name_input"),l=document.getElementById("character_init_input"),h=document.getElementById("character_hp_input"),u=0,m=[],_=document.getElementById("battle_order"),f=document.getElementById("attack_text_barre"),g=document.getElementById("generate_loot");r.addEventListener("click",(function(){++u,p.innerText=u;var t,e,r,d=function(t){for(var e=0;e<o;e++)if(a[e].name==t)return e}(i.value),s=(t=a[d],e=u,r=Math.floor(20*Math.random()+1)+t.Init,new n(t.name+e,t.HP,t.CA,r,t.attack1,t.attack1_touch,t.attack1_min,t.attack1_max,t.attack1_proba,t.attack2,t.attack2_touch,t.attack2_min,t.attack2_max,t.attack2_proba,t.drop_xp,t.drop_coin,t.drop_object1,t.proba1,t.drop_object2,t.proba2));m.push(s),console.log("This "+s.name+" has an initiative of "+m[u-1].Init);var l=document.createElement("div");c.appendChild(l),l.classList.add("present_opponent"),l.innerHTML=i.value})),d.addEventListener("click",(function(){++u,p.innerText=u;var t=s.value,e=l.value,a=h.value;m.push(new n(t,a,0,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0));var o=document.createElement("div");c.appendChild(o),o.classList.add("present_opponent"),o.innerHTML=t+" "+e})),_.addEventListener("click",(function(){c.innerHTML="";for(var t=0,e=m.length,n=[],a=[],o=[],r=[],i=[],p=[],d=0;d<35;d++)for(var s=0;s<e;s++)if(m[s].Init==30-d){r.push(m[s]),++t;var l=document.createElement("div");c.appendChild(l),l.classList.add("present_opponent"),l.innerHTML=t+" "+m[s].name+"<span class = present_opponent id = "+t+"present_opponent> <span class = present_opponent_init id = "+t+"present_opponent_init alt = "+t+"> "+m[s].CA+"</span> <span class = present_opponent_hp id = "+t+"present_opponent_hp alt = "+t+"> "+m[s].HP+"</span> <input type=input class = dammage_input id = "+t+"dammage_input alt = "+t+"> <input type=submit value=take_damage id = "+t+"take_damage alt = "+t+"> <input type=submit value=attack class = generat_attack id = "+t+"attack alt = "+t+"> <input type=input class = character_effect id = "+t+"effect_note value = no_temporary_effect alt = "+t+"> </span>",n.push(document.getElementById(t+"attack")),a.push(document.getElementById(t+"take_damage")),o.push(document.getElementById(t+"dammage_input")),i.push(document.getElementById(t+"present_opponent_hp")),p.push(document.getElementById(t+"present_opponent"))}for(var h=function(t){n[t].addEventListener("click",(function(){var e=function(t){var e=Math.random();if(t.attack1_proba>e){var n=Math.floor(20*Math.random()+1)+t.attack1_touch,a=Math.floor(Math.random()*(t.attack1_max-t.attack1_min+1)+t.attack1_min);return t.name+" attack with "+t.attack1+" with a touch score of "+n+" and inflict "+a+" damages"}var o=Math.floor(20*Math.random()+1)+t.attack2_touch,r=Math.floor(Math.random()*(t.attack2_max-t.attack1_min+1)+t.attack2_min);return t.name+" attack with "+t.attack2+" with a touch score of "+o+" and inflict "+r+" damages"}(r[t]);console.log(e),f.textContent=e})),a[t].addEventListener("click",(function(){var e=o[t].value,n=r[t].HP-e;r[t].HP=n,console.log(n),i[t].textContent=n,n<1&&(p[t].innerHTML=" Dead")}))},u=0;u<e;u++)h(u);console.log(document.getElementById(t+"present_opponent_init"))})),g.addEventListener("click",(function(){for(var t,e,n,a=m.length,o=[],r=0,i=[],c=0,p=0,d=0;d<a;d++){console.log("on genere le loot de "+m[d].name);var s=m[d].drop_object1,l=0;if(m[d].proba1>Math.random()){for(var h=0;h<o.length+1;h++)s==o[h]&&(r=i[h],++r,i[h]=r,l=1);"0"==l&&(o.push(s),i.push(1))}var u=m[d].drop_object2,_=0;if(m[d].proba2>Math.random()){for(var g=0;g<o.length+1;g++)u==o[g]&&(r=i[g],++r,i[g]=r,_=1);"0"==_&&(o.push(u),i.push(1))}var k=m[d].drop_coin;c+=Math.floor(Math.random()*k+1),p+=m[d].drop_xp}t=c-400*(n=Math.floor(c/400))-20*(e=Math.floor(c/20)-20*n);for(var v=" ",b=0;b<o.length;b++)v=v+" / "+i[b]+" "+o[b];v="On gagne un total de "+p+" XP ainsi que "+c+" PC soit "+n+" PO  "+e+" PA  "+t+" PC  "+v,f.textContent=v}))})();